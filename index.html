<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge;chrome=1">
    <title>LaunchDarkly tutorial</title>
    <!-- Use LaunchDarkly sdk -->
    <script src="https://unpkg.com/launchdarkly-js-client-sdk@2"></script>
</head>

<body>
    <script>
        // Allow to specify user via query params
        const params = new URLSearchParams(window.location.search)
        if (params.has('name') && params.has('key')) {
            var user = {
                name: params.get('name'),
                key: params.get('key'),
            };
        } else {
            var user = {
                name: 'Nico van Niekerk',
                key: 'nicotest',
            };
        }

        var div = document.createElement('div');
        document.body.appendChild(div);

        div.appendChild(document.createTextNode('Initializing...'));

        // Create a new LDClient instance with your environment-specific SDK key
        var ldclient = LDClient.initialize('6357c487d01a49116bf8935e', user);

        function render() {
            // ldclient methods only work if "SDKs using Client-side ID" is selected under the flag "Settings > Client-side SDK availability"
            var flagValue = ldclient.variation('hello-world', false);
            var label = (flagValue ? 'Showing' : 'Not showing') + ' your feature to ' + user.key;
            console.log("SDK successfully connected! The value of hello-world is " + flagValue + " for " + user.key)
            div.replaceChild(document.createTextNode(label), div.firstChild);
        }

        ldclient.on('ready', render);
        ldclient.on('change', render);
    </script>
</body>

</html>